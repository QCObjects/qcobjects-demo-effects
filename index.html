<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: https://ssl.gstatic.com; img-src * 'self' data:; child-src *; style-src * 'self' 'unsafe-inline' 'unsafe-eval'; script-src * 'self' 'unsafe-inline' 'unsafe-eval'; connect-src * 'self' 'unsafe-inline' 'unsafe-eval';media-src *">
    <title>QCObjects Demo Effects</title>
</head>

<body>
    <script type="module">
        import "https://cdnjs.cloudflare.com/ajax/libs/qcobjects/2.4.30-beta/QCObjects.js";

        Package("com.myapp", [
            class MainController extends Controller {
                constructor() {
                    super(...arguments);
                    global.set("mainControllerInstance", this);

                }

                effects = {
                        applyFadeIn(element) {
                            (new Fade()).apply(element, 0, 1);
                        },
                        applyFadeOut(element) {
                            (new Fade()).apply(element, 1, 0);
                        },
                        applyMove(element) {
                            (new Move()).apply(element, 0, 0, 100, 100);
                            setTimeout(() => {
                                Move.apply(element, 100, 100, 0, 0);
                            }, 1000);
                        },
                        applyResize(element) {
                            (new Resize()).apply(element, 0, 1);
                        },
                        applyRadius(element) {
                            let element2 = global.get("mainControllerInstance")
                                .component.shadowRoot.subelements(".panel").pop();

                            let element3 = global.get("mainControllerInstance")
                                .component.shadowRoot.subelements("button")
                                .map(e => (new Radius()).apply(e, 0, 27));

                            (new Radius()).apply(element2, 0, 27);
                        },
                        applyWipeLeft(element) {
                            (new WipeLeft()).apply(element, 0, 1);
                        },
                        applyWipeRight(element) {
                            (new WipeRight()).apply(element, 0, 1);
                        },
                        applyWipeUp(element) {
                            (new WipeUp()).apply(element, 0, 1);
                        },
                        applyWipeDown(element) {
                            (new WipeDown()).apply(element, 0, 1);
                        },
                        applyRotate(element) {
                            element.style.transformOrigin = "center center";
                            (new Rotate()).apply(element, 0, 360);
                        },
                        applyRotateX(element) {
                            element.style.transformOrigin = "center center";
                            (new RotateX()).apply(element, 0, 360);
                        },
                        applyRotateY(element) {
                            element.style.transformOrigin = "center center";
                            (new RotateY()).apply(element, 0, 360);
                        },
                        applyRotateZ(element) {
                            element.style.transformOrigin = "center center";
                            (new RotateZ()).apply(element, 0, 360);
                        },
                        applySlideInLeft(element) {
                            (new Move()).apply(element, -element.clientWidth, 0, 0, 0);
                        },
                        applySlideInRight(element) {
                            (new Move()).apply(element, element.clientWidth, 0, 0, 0);
                        },
                        applyFallFromTop(element) {
                            (new Move()).apply(element, 0, -element.clientHeight, 0, 0);
                        },
                        applyRiseFromBottom(element) {
                            (new Move()).apply(element, 0, element.clientHeight, 0, 0);
                        }
                    }                


                applyEffect(effectName) {
                    let functionName = `apply${effectName}`;
                    let code = this.effects[functionName].toString();
                    this.component.shadowRoot.subelements(".snippet").pop().innerHTML = `<pre><code>function ${code}</code></pre>`;
                    this.effects[functionName](this.component.shadowRoot.subelements("svg").pop(), this.options);
                }

            }
        ]);
        let buttonApplyEffect = function (effectName) {
            return `<button ontouchstart=\"global.get('mainControllerInstance').applyEffect('${effectName}');\" onclick=\"global.get('mainControllerInstance').applyEffect('${effectName}');\">${effectName}</button>`;
        }
        Processor.setProcessor(buttonApplyEffect);

        RegisterWidget("main-layout");
    </script>
    <style>
        body {
            background: rgb(2, 0, 36);
            background: linear-gradient(90deg, rgba(2, 0, 36, 1) 0%, rgba(68, 153, 129, 1) 28%, rgba(0, 212, 255, 1) 100%);
        }

        component[name="img/octocat"] {
            margin: 1%;
            top: 0;
            right: 0;
            position: absolute;
            cursor: pointer;
        }
    </style>
    <header>
        <a href="https://github.com/QCObjects/qcobjects-demo-effects">
            <component name="img/octocat" tplextension="svg"></component>
        </a>
    </header>
    <main>
        <main-layout controllerClass="com.myapp.MainController"></main-layout>
    </main>
</body>

</html>